---
layout: post
title: AI Agentå­¦ä¹ å®è·µç¬”è®°
categories: å¤§æ¨¡å‹
tags: å¤§æ¨¡å‹ AI
---

* content
{:toc}

HuggingFace AI Agents Courseå­¦ä¹ ç¬”è®°ï¼ˆAIæ™ºèƒ½ä½“ï¼‰



## 1. èƒŒæ™¯

å½“å‰AIå‘å±•æ—¥æ–°æœˆå¼‚ï¼ŒåŠŸèƒ½è¶Šæ¥è¶Šå¼ºå¤§ã€‚æ—¥å¸¸åªæ˜¯ä½¿ç”¨åŸºæœ¬é—®ç­”æ¯”è¾ƒå¤šï¼Œä¹‹å‰ï¼ˆ[ollamaæ­å»ºæœ¬åœ°ä¸ªäººçŸ¥è¯†åº“](https://xiaodongq.github.io/2024/06/20/ollama-ai-models/)ï¼‰ä¹Ÿåœ¨æœ¬åœ°ç”¨ollamaéƒ¨ç½²åƒé—®ç®€å•ä½“éªŒäº†ä¸€ä¸‹ã€‚è¿‘å‡ å¹´AIå¤§æ¨¡å‹åº”ç”¨ä»ChatBot -> Copilot -> Agentï¼Œå¯¹äºè½¯ä»¶è¡Œä¸šä»ä¸šè€…æ¥è¯´ç›¸å…³è¾…åŠ©æ›´ä¸ºæ˜æ˜¾ï¼Œæ¯”å¦‚ç«çƒ­çš„cursorç¼–è¾‘å™¨ã€Devinè½¯ä»¶å·¥ç¨‹å¸ˆæ™ºèƒ½ä½“ã€‚

æŠ€æœ¯æ½®æµè¿˜æ˜¯å¾—è·Ÿä¸Šï¼Œæ­£å¥½äº†è§£åˆ°è¿‘æœŸHuggingFaceæ¨å‡ºäº†ä¸€ä¸ªå…è´¹çš„AI Agentsè¯¾ç¨‹ï¼š[AI Agents Course](https://huggingface.co/learn/agents-course/unit0/introduction)ï¼Œå…ˆå­¦ä¹ è¯¥è¯¾ç¨‹å¹¶è¿›è¡Œå®è·µã€‚

* è¯¾ç¨‹ä»‹ç»ï¼š[AI Agents Course](https://huggingface.co/learn/agents-course/unit0/introduction)
* GitHubï¼š[huggingface/agents-course](https://github.com/huggingface/agents-course)

ä¸‹é¢æ˜¯ç›¸åº”è¯¾ç¨‹å•å…ƒé“¾æ¥ï¼š

You can access the course here ğŸ‘‰ <a href="https://hf.co/learn/agents-course" target="_blank">https://hf.co/learn/agents-course</a>

| Unit | Topic                          | Description                                                                 |
|------|--------------------------------|-----------------------------------------------------------------------------|
| 0    | [Welcome to the Course](https://huggingface.co/learn/agents-course/en/unit0/introduction) | Welcome, guidelines, necessary tools, and course overview.                  |
| 1    | [Introduction to Agents](https://huggingface.co/learn/agents-course/en/unit1/introduction)       | Definition of agents, LLMs, model family tree, and special tokens.          |
| 2    | [2_frameworks](units/en/unit2/README.md)                     | Overview of smolagents, LangChain, LangGraph, and LlamaIndex.               |
| 3    | [3_use_cases](units/en/unit3/README.md)                      | SQL, code, retrieval, and on-device agents using various frameworks.        |
| 4    | [4_final_assignment_with_benchmark](units/en/unit4/README.md) | Automated evaluation of agents and leaderboard with student results.        |

## 2. å•å…ƒ1ï¼šAgentsä»‹ç»

### 2.1. ä»€ä¹ˆæ˜¯Agent

**Agentå®šä¹‰**ï¼šæ˜¯ä¸€ä¸ªåˆ©ç”¨AIæ¨¡å‹ä¸å…¶ç¯å¢ƒè¿›è¡Œäº¤äº’çš„ç³»ç»Ÿï¼Œä»¥å®ç°ç”¨æˆ·å®šä¹‰çš„ç›®æ ‡ã€‚å®ƒç»“åˆäº†æ¨ç†ï¼ˆreasonï¼‰ï¼Œè®¡åˆ’ï¼ˆplanï¼‰å’Œæ‰§è¡Œæ“ä½œï¼ˆé€šå¸¸æ˜¯é€šè¿‡å¤–éƒ¨å·¥å…·ï¼‰æ¥å®Œæˆä»»åŠ¡ã€‚

ä¸¾ä¾‹ï¼šAgentæ˜¯ä¸€ä¸ªç”Ÿæ´»åŠ©æ‰‹ï¼Œå‘Šè¯‰ä»–æˆ‘æƒ³è¦ä¸€æ¯å’–å•¡ã€‚è€ŒååŠ©æ‰‹ç†è§£äº†è‡ªç„¶è¯­è¨€ï¼Œæ¨ç†æ€è€ƒåšä¸€æ¯å’–å•¡éœ€è¦çš„æ­¥éª¤ï¼Œå¹¶æŒ‰æ­¥éª¤è¡ŒåŠ¨ï¼Œè¿‡ç¨‹ä¸­ä»–å¯ä»¥ä½¿ç”¨å…¶äº†è§£çš„å·¥å…·ã€‚

å›¾ç¤ºï¼š  
![è¯·æ±‚å’–å•¡å›¾ç¤º](/images/2025-02-12-ai-agent-sample.jpg)

æŠŠAgentæƒ³è±¡æˆ2ä¸ªéƒ¨åˆ†ï¼š

* å¤§è„‘ï¼ˆAIæ¨¡å‹ï¼‰ï¼šå¤„ç†æ¨ç†å’Œè®¡åˆ’
    * Agentä¸­ä½¿ç”¨çš„ *æœ€é€šç”¨* çš„AIæ¨¡å‹æ˜¯ `LLM` (Large Language Modelï¼Œå¤§è¯­è¨€æ¨¡å‹)ï¼Œä»¥**æ–‡æœ¬**ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä»¥**æ–‡æœ¬**ä½œä¸ºè¾“å‡ºã€‚
        * ä¹Ÿæœ‰å¯èƒ½ä½¿ç”¨å…¶ä»–è¾“å…¥çš„æ¨¡å‹ä½œä¸ºæ ¸å¿ƒæ¨¡å‹ï¼Œæ¯”å¦‚è§†è§‰è¯­è¨€æ¨¡å‹`Vision Language Model` (VLM)ï¼Œå¯ä»¥ç†è§£å›¾ç‰‡ä½œä¸ºè¾“å…¥
    * æ¯”å¦‚æ¥è‡ª OpenAIçš„`GPT4`ã€Metaçš„`LLama`ã€Googleçš„`Gemini` ç­‰ç­‰
* èº«ä½“ï¼ˆèƒ½åŠ›å’Œå·¥å…·ï¼‰ï¼šä»£è¡¨Agentèƒ½åšçš„ä¸€åˆ‡è¡ŒåŠ¨ï¼Œå¯é‡‡å–çš„è¡ŒåŠ¨ä¾èµ–äºAgentè£…é…äº†ä»€ä¹ˆå·¥å…·

### 2.2. ä»€ä¹ˆæ˜¯LLM

`LLM`ï¼ˆLarge Language Modelï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼‰ æ˜¯ä¸€ç§äººå·¥æ™ºèƒ½æ¨¡å‹ï¼Œæ“…é•¿ç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€ã€‚å®ƒä»¬æ¥å—äº†å¤§é‡æ–‡æœ¬æ•°æ®çš„è®­ç»ƒï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿå­¦ä¹ è¯­è¨€çš„æ¨¡å¼ã€ç»“æ„ç”šè‡³ç»†å¾®å·®åˆ«ã€‚è¿™äº›æ¨¡å‹é€šå¸¸ç”±æ•°ç™¾ä¸‡ä¸ªå‚æ•°ç»„æˆã€‚

å½“å‰å¤§éƒ¨åˆ†LLMéƒ½æ˜¯å»ºç«‹åœ¨`Transformer`æ¶æ„ä¹‹ä¸Šçš„ï¼Œè¿™æ˜¯ä¸€ç§åŸºäº â€œæ³¨æ„åŠ›â€ï¼ˆ`Attention`ï¼‰ ç®—æ³•çš„æ·±åº¦å­¦ä¹ æ¶æ„ï¼Œè‡ª2018å¹´`Google`å‘å¸ƒ`BERT`ä»¥æ¥ï¼Œè¯¥æ¶æ„å¼•èµ·äº†äººä»¬çš„æå¤§å…´è¶£ã€‚

> `Transformer` æ¶æ„æ˜¯ä¸€ç§åŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆSelf-Attentionï¼‰çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå¹¿æ³›åº”ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ï¼Œå¦‚æœºå™¨ç¿»è¯‘ã€æ–‡æœ¬ç”Ÿæˆã€æ–‡æœ¬åˆ†ç±»ç­‰ã€‚å®ƒç”± Vaswani ç­‰äººåœ¨ 2017 å¹´çš„è®ºæ–‡`ã€ŠAttention is All You Needã€‹`ä¸­é¦–æ¬¡æå‡ºï¼Œå¹¶è¿…é€Ÿæˆä¸º NLP é¢†åŸŸçš„æ ¸å¿ƒæ¶æ„ã€‚

> `BERT` æ˜¯åŸºäº Transformer ç¼–ç å™¨çš„ä¸€ç§é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼Œé€šè¿‡åŒå‘ä¸Šä¸‹æ–‡å»ºæ¨¡å’Œåˆ›æ–°çš„è®­ç»ƒä»»åŠ¡ï¼ˆå¦‚ MLM å’Œ NSPï¼‰ï¼Œåœ¨ NLP é¢†åŸŸå–å¾—äº†å·¨å¤§æˆåŠŸã€‚  
> å®ƒä¸ä»…ç»§æ‰¿äº† Transformer çš„å¼ºå¤§èƒ½åŠ›ï¼Œè¿˜é€šè¿‡`é¢„è®­ç»ƒ-å¾®è°ƒèŒƒå¼`æ¨åŠ¨äº† NLP æŠ€æœ¯çš„å‘å±•ã€‚`BERT` çš„æå‡ºæ ‡å¿—ç€ NLP è¿›å…¥äº†é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹çš„æ–°æ—¶ä»£ï¼Œåç»­çš„è®¸å¤šæ¨¡å‹ï¼ˆå¦‚ GPTã€T5 ç­‰ï¼‰éƒ½å—åˆ°äº†å®ƒçš„å¯å‘ã€‚

Transformer æ¶æ„æœ‰3ç§ç±»å‹ï¼š

* ç¼–ç å™¨ï¼ˆEncoderï¼‰
    * å°†æ–‡æœ¬è½¬åŒ–ä¸ºå¯†é›†è¡¨ç¤ºï¼Œç”¨äºæ–‡æœ¬åˆ†ç±»ã€è¯­ä¹‰æœç´¢ç­‰ï¼Œæ¯”å¦‚Googleçš„`BERT`
* è§£ç å™¨ï¼ˆDecoderï¼‰
    * é€ä¸€ç”Ÿæˆæ–°æ ‡è®°ä»¥å®Œæˆåºåˆ—ï¼Œç”¨äºæ–‡æœ¬ç”Ÿæˆã€èŠå¤©æœºå™¨äººã€ä»£ç ç”Ÿæˆç­‰ï¼Œæ¯”å¦‚Metaçš„`Llama`
* åºåˆ—åˆ°åºåˆ—ï¼ˆSeq2Seq ï¼‰
    * ç»“åˆä¸¤è€…ï¼Œç”¨äºç¿»è¯‘ã€æ€»ç»“ã€é‡Šä¹‰ç­‰ï¼Œæ¯”å¦‚ T5ï¼ˆGoogleï¼‰ã€BARTï¼ˆMetaï¼‰

å¸¸è§æ¨¡å‹ï¼š

|æ¨¡å‹|å…¬å¸|
|--|--|
|Deepseek-R1|DeepSeek|
|GPT4|OpenAI|
|Llama 3|Meta (Facebook AI Research)|
|SmolLM2|Hugging Face|
|Gemma|Google|
|Mistral|Mistral|

#### 2.2.1. LLM çš„å·¥ä½œåŸç†

å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„åŸºæœ¬åŸç†ç®€å•å´æä¸ºæœ‰æ•ˆï¼šå…¶ç›®æ ‡æ˜¯åœ¨ç»™å®šå‰æ–‡ä¸€ç³»åˆ—`token`ï¼ˆè¯å…ƒï¼‰çš„æƒ…å†µä¸‹ï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ª`token`ã€‚`token`æ˜¯å¤§è¯­è¨€æ¨¡å‹å¤„ç†ä¿¡æ¯çš„åŸºæœ¬å•ä½ã€‚å¯ä»¥æŠŠ â€œtokenâ€ æƒ³è±¡æˆ â€œå•è¯â€ï¼Œä½†å‡ºäºæ•ˆç‡è€ƒè™‘ï¼Œå¤§è¯­è¨€æ¨¡å‹å¹¶ä¸ä½¿ç”¨å®Œæ•´çš„å•è¯ã€‚

æ¯ä¸ªLLMéƒ½æœ‰ä¸€äº›ç‰¹æ®Šçš„tokenï¼ŒLLMä½¿ç”¨è¿™äº›tokenæ¥æ ‡è®°åŒºåˆ†å…¶ç”Ÿæˆè¿‡ç¨‹ä¸­çš„ä¸€äº›ç»„ä»¶ï¼Œæ¯”å¦‚ç”¨äºæ ‡è®°åºåˆ—/æ¶ˆæ¯/åº”ç­”çš„å¼€å§‹å’Œç»“æŸï¼Œå…¶ä¸­æœ€é‡è¦çš„æ ‡è®°æ˜¯åºåˆ—ç»“æŸï¼šEnd of sequence token (`EOS`)

**é¢„æµ‹ä¸‹ä¸€ä¸ªtoken**ï¼š

LLMæ˜¯è‡ªå›å½’çš„ï¼ˆ`autoregressive`ï¼‰ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªtokençš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªtokençš„è¾“å…¥ï¼Œç›´åˆ°é¢„æµ‹çš„ä¸‹ä¸€ä¸ªtokenæ˜¯`EOS`ã€‚

* è¾“å…¥æ–‡æœ¬è¢«tokenåŒ–ï¼ˆtokenizedï¼‰åï¼Œæ¨¡å‹ä¼šè®¡ç®—è¯¥åºåˆ—çš„ä¸€ç§è¡¨å¾ï¼ˆrepresentationï¼‰ï¼Œè¿™ç§è¡¨å¾æ¶µç›–äº†è¾“å…¥åºåˆ—ä¸­æ¯ä¸ªtokençš„å«ä¹‰åŠä½ç½®ä¿¡æ¯ã€‚
* è¿™ç§è¡¨å¾ä¼šè¾“å…¥åˆ°æ¨¡å‹ä¸­ï¼Œæ¨¡å‹éšåè¾“å‡º`åˆ†æ•°`ï¼Œå¯¹å…¶è¯æ±‡è¡¨ä¸­æ¯ä¸ªtokenä½œä¸ºåºåˆ—ä¸‹ä¸€ä¸ªtokençš„å¯èƒ½æ€§è¿›è¡Œæ’åºã€‚

**è§£ç ç­–ç•¥ï¼ˆdecodeï¼‰**ï¼š

åŸºäºè¿™äº›åˆ†æ•°ï¼Œå¯ä»¥æœ‰å¤šç§`è§£ç `ç­–ç•¥æ¥é€‰æ‹©å“ªäº›tokenæ¥å®Œæˆåç»­çš„å†…å®¹ã€‚æ¯”å¦‚ç®€å•åœ°æ€»æ˜¯é€‰å–åˆ†æ•°æœ€é«˜çš„æ ‡è®°ï¼›æ›´é«˜çº§çš„æœ‰æŸæœç´¢ï¼Œå®ƒä¼šæ¢ç´¢å¤šä¸ªå€™é€‰åºåˆ—ï¼Œæ‰¾åˆ°æ€»åˆ†æœ€é«˜çš„åºåˆ—

**æ³¨æ„åŠ›æœºåˆ¶**ï¼š

Transformeræ¶æ„ä¸­çš„`æ³¨æ„åŠ›`ï¼ˆAttentionï¼‰æœºåˆ¶è‡³å…³é‡è¦ã€‚

åœ¨é¢„æµ‹ä¸‹ä¸€ä¸ªå•è¯æ—¶ï¼Œå¥å­ä¸­çš„æ¯ä¸ªå•è¯é‡è¦æ€§å¹¶ä¸æ˜¯ç›¸åŒçš„ï¼Œæ³¨æ„åŠ›æœºåˆ¶èƒ½å¤Ÿè¯†åˆ«å‡ºæœ€ç›¸å…³çš„å•è¯ï¼Œä»è€Œæé«˜é¢„æµ‹çš„å‡†ç¡®æ€§ã€‚æ¯”å¦‚`The capital of France is â€¦`ä¸­ï¼Œ`capital`å’Œ`France`æ˜¯æœ€é‡è¦çš„ã€‚

**å‡ ä¸ªæ¦‚å¿µï¼š**

* `ä¸Šä¸‹æ–‡é•¿åº¦`ï¼ˆcontext lengthï¼‰ï¼šæŒ‡LLMèƒ½å¤„ç†çš„æœ€å¤§æ ‡è®°æ•°é‡ï¼Œä¹Ÿæ˜¯å…¶æ³¨æ„åŠ›çš„æœ€å¤§è·¨åº¦
* `æç¤ºè¯`ï¼ˆpromptï¼‰ï¼šè¾“å…¥ç»™LLMçš„åºåˆ—è¢«ç§°ä¸º`æç¤ºè¯`ï¼ˆpromptï¼‰ï¼Œç²¾å¿ƒè®¾è®¡æç¤ºæœ‰åŠ©äºå¼•å¯¼LLMç”ŸæˆæœŸæœ›çš„è¾“å‡º
    * è€ƒè™‘åˆ°LLMçš„å”¯ä¸€å·¥ä½œæ˜¯é€šè¿‡æŸ¥çœ‹æ¯ä¸ªè¾“å…¥tokenæ¥é¢„æµ‹ä¸‹ä¸€ä¸ªtokenï¼Œå¹¶é€‰æ‹©å“ªä¸ªtokenæ˜¯ â€œé‡è¦çš„â€ï¼Œå› æ­¤è¾“å…¥åºåˆ—çš„æªè¾ï¼ˆå³promptï¼‰éå¸¸é‡è¦

#### 2.2.2. LLM æ˜¯å¦‚ä½•è®­ç»ƒçš„

LLMåœ¨å¤§è§„æ¨¡æ–‡æœ¬æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä»¬é€šè¿‡`è‡ªç›‘ç£`ï¼ˆself-supervisedï¼‰æˆ–`æ©ç è¯­è¨€`ï¼ˆmasked languageï¼‰å»ºæ¨¡ç›®æ ‡ï¼Œæ¥å­¦ä¹ é¢„æµ‹åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå•è¯ã€‚

> â€œmasked languageâ€ é€šå¸¸æŒ‡ â€œæ©ç è¯­è¨€â€ï¼Œåœ¨è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸï¼Œå°¤å…¶æ˜¯åœ¨è¯­è¨€æ¨¡å‹çš„è®­ç»ƒä¸­ï¼Œâ€œæ©ç è¯­è¨€å»ºæ¨¡ï¼ˆMasked Language Modelingï¼ŒMLMï¼‰â€ æ˜¯ä¸€ç§å¸¸ç”¨çš„æŠ€æœ¯æ‰‹æ®µã€‚  
> åŸç†ï¼šåœ¨è®­ç»ƒæ•°æ®ä¸­éšæœºé€‰æ‹©ä¸€äº›å•è¯æˆ–è¯å…ƒï¼Œå¹¶å°†å®ƒä»¬æ›¿æ¢ä¸ºç‰¹æ®Šçš„æ©ç æ ‡è®°ï¼ˆä¾‹å¦‚ â€œ[MASK]â€ï¼‰ã€‚ç„¶åï¼Œæ¨¡å‹çš„ä»»åŠ¡æ˜¯æ ¹æ®ä¸Šä¸‹æ–‡æ¥é¢„æµ‹è¿™äº›è¢«æ©ç çš„å•è¯æˆ–è¯å…ƒæ˜¯ä»€ä¹ˆã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¨¡å‹è¢«è¿«å­¦ä¹ æ–‡æœ¬ä¸­çš„è¯­è¨€æ¨¡å¼å’Œè¯­ä¹‰ä¿¡æ¯ï¼Œä»¥ä¾¿èƒ½å¤Ÿå‡†ç¡®åœ°é¢„æµ‹è¢«æ©ç çš„éƒ¨åˆ†ã€‚  
> ä½œç”¨ï¼šå¢å¼ºè¯­è¨€ç†è§£èƒ½åŠ›ã€æé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›

é€šè¿‡è¿™ç§`æ— ç›‘ç£å­¦ä¹ `ï¼ˆunsupervised learningï¼‰ï¼Œæ¨¡å‹èƒ½å¤Ÿå­¦ä¹ è¯­è¨€ç»“æ„ä»¥åŠæ–‡æœ¬ä¸­çš„æ½œåœ¨æ¨¡å¼ï¼Œä»è€Œä½¿æ¨¡å‹èƒ½å¤Ÿå¯¹æœªæ›¾è§è¿‡çš„æ•°æ®è¿›è¡Œæ³›åŒ–å¤„ç†ã€‚

åœ¨å®Œæˆè¿™ä¸€åˆå§‹`é¢„è®­ç»ƒ`ï¼ˆpre-trainingï¼‰åï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¯ä»¥åŸºäº`æœ‰ç›‘ç£å­¦ä¹ ç›®æ ‡`ï¼ˆsupervised learning objectiveï¼‰è¿›è¡Œ`å¾®è°ƒ`ï¼ˆ**`fine-tuned`**ï¼‰ï¼Œä»¥æ‰§è¡Œç‰¹å®šä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œä¸€äº›æ¨¡å‹é’ˆå¯¹å¯¹è¯ç»“æ„æˆ–å·¥å…·ä½¿ç”¨è¿›è¡Œè®­ç»ƒï¼Œè€Œå¦ä¸€äº›åˆ™ä¸“æ³¨äºåˆ†ç±»æˆ–ä»£ç ç”Ÿæˆã€‚

> æœ‰ç›‘ç£å­¦ä¹ ï¼ˆsupervised learningï¼‰æ˜¯æŒ‡åˆ©ç”¨æ ‡è®°å¥½çš„è®­ç»ƒæ•°æ®æ¥è®­ç»ƒæ¨¡å‹ï¼Œè®©æ¨¡å‹å­¦ä¹ è¾“å…¥ç‰¹å¾ä¸è¾“å‡ºæ ‡ç­¾ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œä»è€Œå¯¹æœªçŸ¥æ•°æ®è¿›è¡Œé¢„æµ‹å’Œåˆ†ç±»çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚åœ¨æœ‰ç›‘ç£å­¦ä¹ ä¸­ï¼Œè®­ç»ƒæ•°æ®é›†ä¸­çš„æ¯ä¸ªæ ·æœ¬éƒ½ç”±è¾“å…¥ç‰¹å¾å‘é‡å’Œå¯¹åº”çš„è¾“å‡ºæ ‡ç­¾ç»„æˆï¼Œæ¨¡å‹é€šè¿‡å­¦ä¹ è¿™äº›æ ·æœ¬æ•°æ®ï¼Œè¯•å›¾æ‰¾åˆ°ä¸€ç§`é€šç”¨çš„æ¨¡å¼æˆ–å‡½æ•°`ï¼Œä½¿å¾—å¯¹äºæ–°çš„è¾“å…¥æ•°æ®ï¼Œèƒ½å¤Ÿå‡†ç¡®åœ°`é¢„æµ‹`å‡ºç›¸åº”çš„è¾“å‡ºã€‚

#### 2.2.3. LLMå¦‚ä½•ä½¿ç”¨

æœ‰ä¸¤ç§ä¸»è¦æ–¹å¼ï¼š

* 1ã€æœ¬åœ°è¿è¡Œã€‚éœ€è¦æœ‰è¶³å¤Ÿçš„ç¡¬ä»¶æ”¯æŒ
* 2ã€ä½¿ç”¨äº‘æœåŠ¡æˆ–APIã€‚æ¯”å¦‚é€šè¿‡ Hugging Face çš„æ— æœåŠ¡å™¨æ¨ç† APIï¼Œæœ¬è¯¾ç¨‹ä¸»è¦é‡‡ç”¨è¿™ç§æ–¹å¼

**å°ç»“**ï¼šLLM æ˜¯ AIæ™ºèƒ½ä½“ï¼ˆAI Agentsï¼‰çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œä¸ºæ™ºèƒ½ä½“ç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€æä¾›åŸºç¡€ã€‚å®ƒèƒ½å¤Ÿè§£é‡Šç”¨æˆ·æŒ‡ä»¤ã€åœ¨å¯¹è¯ä¸­ä¿æŒä¸Šä¸‹æ–‡è¿è´¯ã€åˆ¶å®šè¡ŒåŠ¨è§„åˆ’å¹¶å†³å®šä½¿ç”¨å“ªäº›å·¥å…·ï¼Œæ˜¯ AIæ™ºèƒ½ä½“çš„æ ¸å¿ƒ â€œå¤§è„‘â€ã€‚

### 2.3. æ¶ˆæ¯ä¸ç‰¹æ®Šæ ‡è®°

æœ¬èŠ‚ä»‹ç»LLMå¦‚ä½•é€šè¿‡`èŠå¤©æ¨¡æ¿ï¼ˆchat templatesï¼‰`ç»„ç»‡ç”Ÿæˆçš„å†…å®¹ã€‚ä¸ ChatGPT ç±»ä¼¼ï¼Œç”¨æˆ·é€šå¸¸é€šè¿‡èŠå¤©ç•Œé¢ä¸æ™ºèƒ½ä½“è¿›è¡Œäº¤äº’ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ—¨åœ¨äº†è§£å¤§è¯­è¨€æ¨¡å‹æ˜¯å¦‚ä½•ç®¡ç†èŠå¤©è¿‡ç¨‹çš„ã€‚

å½“ä½ ä¸ ChatGPT æˆ– Hugging Chat è¿™ç±»ç³»ç»ŸèŠå¤©æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨`äº¤æ¢æ¶ˆæ¯ï¼ˆexchanging messagesï¼‰`ã€‚åœ¨åå°ï¼Œè¿™äº›æ¶ˆæ¯ä¼šè¢«è¿æ¥å¹¶æ ¼å¼åŒ–ä¸ºæ¨¡å‹èƒ½å¤Ÿç†è§£çš„`æç¤ºï¼ˆpromptï¼‰`

å¦‚ä¸‹ä¾‹å¯è§ ä»UIä¸Šçœ‹åˆ°çš„å†…å®¹ å’Œ å–‚ç»™æ¨¡å‹çš„æç¤ºå†…å®¹ çš„å·®å¼‚ï¼š

![UIå’Œåå°å†…å®¹å·®å¼‚](/images/2025-02-16-llm-assistant.jpg)

è¿™é‡Œå°±æ˜¯`èŠå¤©æ¨¡æ¿ï¼ˆchat templatesï¼‰`å‘ç”Ÿä½œç”¨çš„åœ°æ–¹ï¼Œå®ƒä»¬å……å½“äº†`å¯¹è¯æ¶ˆæ¯ï¼ˆconversational messages ï¼‰`ï¼ˆä¸Šå›¾ä¸­`ç”¨æˆ·`å’Œ`åŠ©æ‰‹`é—´çš„è½®æ¬¡ï¼‰ä¸æ‰€é€‰å¤§è¯­è¨€æ¨¡å‹`ç‰¹å®šæ ¼å¼è¦æ±‚ï¼ˆthe specific formatting requirementsï¼‰`ä¹‹é—´çš„æ¡¥æ¢ã€‚æ¢å¥è¯è¯´ï¼ŒèŠå¤©æ¨¡æ¿æ„å»ºäº†ç”¨æˆ·ä¸æ™ºèƒ½ä½“ä¹‹é—´çš„äº¤æµç»“æ„ï¼Œç¡®ä¿æ¯ä¸ªæ¨¡å‹ï¼Œå°½ç®¡å®ƒä»¬æœ‰ç‹¬ç‰¹çš„ç‰¹æ®Štokenï¼Œéƒ½èƒ½æ”¶åˆ°æ ¼å¼æ­£ç¡®çš„æç¤ºï¼ˆpromptï¼‰ã€‚

**æ¶ˆæ¯**ï¼šå¤§è¯­è¨€æ¨¡å‹çš„åº•å±‚ç³»ç»Ÿ

* `ç³»ç»Ÿæ¶ˆæ¯ï¼ˆSystem Messagesï¼‰`ï¼Œä¹Ÿç§°ä¸ºç³»ç»Ÿæç¤ºï¼ˆSystem Promptsï¼‰ï¼Œå®šä¹‰äº†æ¨¡å‹åº”æœ‰çš„è¡Œä¸ºæ–¹å¼ã€‚å®ƒä»¬ä½œä¸º`æŒä¹…çš„æŒ‡ä»¤`ï¼ˆpersistent instructionsï¼‰ï¼ŒæŒ‡å¯¼åç»­çš„æ¯ä¸€æ¬¡äº¤äº’ã€‚
    * åœ¨ä½¿ç”¨æ™ºèƒ½ä½“æ—¶ï¼Œç³»ç»Ÿæ¶ˆæ¯è¿˜ä¼šæä¾›æœ‰å…³`å¯ç”¨å·¥å…·`çš„ä¿¡æ¯ï¼Œå‘æ¨¡å‹è¯´æ˜å¦‚ä½•æ ¼å¼åŒ–`è¦é‡‡å–çš„è¡ŒåŠ¨`ï¼ˆhow to format the actions to takeï¼‰ï¼Œå¹¶åŒ…å«å…³äº`æ€ç»´è¿‡ç¨‹åº”å¦‚ä½•åˆ†æ®µ`çš„æŒ‡å¯¼åŸåˆ™ã€‚
* `å¯¹è¯ï¼ˆConversationsï¼‰`ï¼Œç”¨æˆ·æ¶ˆæ¯å’ŒåŠ©æ‰‹æ¶ˆæ¯
    * `å¯¹è¯`ç”±äººç±»ï¼ˆç”¨æˆ·ï¼‰å’Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆåŠ©æ‰‹ï¼‰ä¹‹é—´äº¤æ›¿çš„æ¶ˆæ¯ç»„æˆã€‚
    * `èŠå¤©æ¨¡æ¿ï¼ˆchat templateï¼‰`é€šè¿‡ä¿å­˜å¯¹è¯å†å²è®°å½•æ¥å¸®åŠ©ç»´æŠ¤ä¸Šä¸‹æ–‡ï¼Œä½¿å¾—å¤šè½®å¯¹è¯æ›´è¿è´¯ã€‚

`å¯¹è¯`ä¿¡æ¯ç¤ºä¾‹ï¼š

```json
conversation = [
    {"role": "user", "content": "I need help with my order"},
    {"role": "assistant", "content": "I'd be happy to help. Could you provide your order number?"},
    {"role": "user", "content": "It's ORDER-123"},
]
```

agentæ€»æ˜¯**è¿æ¥ä¼šè¯ä¸­çš„æ‰€æœ‰æ¶ˆæ¯**ï¼Œå°†å…¶ä½œä¸ºå•ç‹¬çš„åºåˆ—æä¾›ç»™LLMï¼Œ`èŠå¤©æ¨¡æ¿`å°†æ‰€æœ‰è¿™äº›æ¶ˆæ¯è½¬æ¢ä¸ºä¸€ä¸ª`æç¤ºè¯ï¼ˆpromptï¼‰`ï¼Œä»£ç è¡¨ç°ä¸ºå°†pythonçš„listå†…å®¹è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«æ‰€æœ‰ä¿¡æ¯çš„stringã€‚

**`èŠå¤©æ¨¡æ¿ï¼ˆChat-Templatesï¼‰`**ï¼š

å¦‚ä¸Šæ‰€è¿°ï¼ŒèŠå¤©æ¨¡æ¿å¯¹ç»„ç»‡ è¯­è¨€æ¨¡å‹ å’Œ ç”¨æˆ· ä¹‹é—´çš„å¯¹è¯è‡³å…³é‡è¦ã€‚

* `åŸºæœ¬æ¨¡å‹ï¼ˆbase modelï¼‰`ä¸`æŒ‡ä»¤æ¨¡å‹ï¼ˆinstruct modelï¼‰`
    * åŸºæœ¬æ¨¡å‹åŸºäºåŸå§‹æ–‡æœ¬æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œä»¥é¢„æµ‹ä¸‹ä¸€ä¸ªæ ‡è®°
    * æŒ‡ä»¤æ¨¡å‹æ˜¯ä¸ºäº†éµå¾ªæŒ‡ä»¤å’Œå‚ä¸å¯¹è¯ï¼Œå¯¹äºåŸºæœ¬æ¨¡å‹è¿›è¡Œäº†ç‰¹åˆ«çš„`å¾®è°ƒï¼ˆfine-tunedï¼‰`
    * ä¸ºäº†ä½¿ä¸€ä¸ªåŸºæœ¬æ¨¡å‹è¡¨ç°å¾—åƒæŒ‡ä»¤æ¨¡å‹ï¼Œå°±éœ€è¦å°†promptæç¤ºè½¬æ¢ä¸ºæ¨¡å‹èƒ½ç†è§£çš„ç»Ÿä¸€æ ¼å¼ï¼Œæ­¤å¤„å°±æ˜¯`èŠå¤©æ¨¡æ¿`è¦åšçš„äº‹ã€‚æ¯”å¦‚`ChatML`å°±æ˜¯ä¸€ä¸ªè¿™æ ·çš„æ¨¡æ¿ã€‚
    * **éœ€è¦æ³¨æ„çš„æ˜¯**ï¼š`åŸºæœ¬æ¨¡å‹`å¯ä»¥åœ¨ä¸åŒçš„"èŠå¤©æ¨¡æ¿"ä¸Šå¾®è°ƒï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨ä¸€ä¸ª`æŒ‡ä»¤æ¨¡å‹`æ—¶éœ€è¦ç¡®ä¿æˆ‘ä»¬ä½¿ç”¨äº†æ­£ç¡®çš„èŠå¤©æ¨¡æ¿ã€‚

### 2.4. ä»€ä¹ˆæ˜¯å·¥å…·ï¼ˆToolsï¼‰

AIæ™ºèƒ½ä½“ï¼ˆAI Agentsï¼‰çš„ä¸€ä¸ªå…³é”®æ–¹é¢æ˜¯å…¶`é‡‡å–è¡ŒåŠ¨ï¼ˆtake actions`ï¼‰çš„èƒ½åŠ›ï¼Œè¯¥èƒ½åŠ›æ˜¯é€šè¿‡ä½¿ç”¨`å·¥å…·ï¼ˆToolsï¼‰`æ¥å®ç°çš„ã€‚

æœ¬èŠ‚å°†ä¼šå­¦ä¹ ä»€ä¹ˆæ˜¯å·¥å…·ï¼Œå¦‚ä½•æœ‰æ•ˆåœ°è®¾è®¡å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡`ç³»ç»Ÿæ¶ˆæ¯`å°†å®ƒä»¬é›†æˆåˆ°ä½ çš„AIæ™ºèƒ½ä½“é‡Œã€‚ä½¿ç”¨æ­£ç¡®çš„å·¥å…·èƒ½å¤§å¤§æé«˜æ™ºèƒ½ä½“çš„èƒ½åŠ›ã€‚

#### 2.4.1. AIå·¥å…·

**å·¥å…·ï¼ˆToolsï¼‰**ï¼šå·¥å…·æ˜¯èµ‹äºˆ LLM çš„ä¸€ä¸ªå‡½æ•°ï¼Œå…·æœ‰æ˜ç¡®çš„ç›®æ ‡ã€‚

ä¸‹é¢æ˜¯AIæ™ºèƒ½ä½“ä¸­å¸¸ç”¨çš„ä¸€äº›å·¥å…·ï¼š

|Tool|Description|
|--|--|
|Web Search|å…è®¸æ™ºèƒ½ä½“ä»äº’è”ç½‘è·å–æœ€æ–°ä¿¡æ¯|
|Image Generation|æ ¹æ®æ–‡æœ¬æè¿°åˆ›å»ºå›¾åƒ|
|Retrieval|ä»å¤–éƒ¨æºæ£€ç´¢ä¿¡æ¯|
|API Interface|ä¸å¤–éƒ¨APIï¼ˆå¦‚GitHubã€YouTubeã€Spotifyç­‰ï¼‰è¿›è¡Œäº¤äº’|

ä¸Šé¢åªæ˜¯ä¸€äº›ç¤ºä¾‹ï¼Œè¿˜å¯æ ¹æ®å®é™…éœ€æ±‚åˆ›å»ºå·¥å…·ã€‚ä¸€ä¸ªå¥½çš„å·¥å…·åº”èƒ½è¡¥å……LLMçš„èƒ½åŠ›ï¼Œå¼¥è¡¥å…¶åœ¨ç®—æœ¯è¿ç®—ã€è·å–å®æ—¶æ•°æ®ï¼ˆæ¨¡å‹ä»…åŸºäºå†å²è®­ç»ƒæ•°æ®ï¼‰ç­‰æ–¹é¢çš„ä¸è¶³ã€‚

ä¸€ä¸ªå·¥å…·åº”è¯¥åŒ…å«ï¼š

* å¯¹åŠŸèƒ½çš„æ–‡æœ¬æè¿°ï¼ˆtextual descriptionï¼‰
* å¯è°ƒç”¨å¯¹è±¡ï¼ˆA Callableï¼‰
* å¸¦ç±»å‹çš„å‚æ•°ï¼ˆArguments with typingsï¼‰
* ï¼ˆå¯é€‰ï¼‰ä¹Ÿå¯åŒ…å«å¸¦ç±»å‹çš„è¾“å‡ºï¼ˆOutputs with typingsï¼‰

#### 2.4.2. å·¥å…·æ˜¯å¦‚ä½•å·¥ä½œçš„

LLMåªèƒ½æ¥æ”¶å’Œç”Ÿæˆæ–‡æœ¬ï¼Œæœ¬èº«æ— æ³•è°ƒç”¨å·¥å…·ã€‚æˆ‘ä»¬æ‰€è¯´çš„ç»™æ™ºèƒ½ä½“æä¾›å·¥å…·ï¼Œå®é™…æ˜¯å‘Šè¯‰`LLM`å…³äº`å·¥å…·`çš„å­˜åœ¨ï¼Œå¹¶è¦æ±‚æ¨¡å‹åœ¨å…¶éœ€è¦æ—¶ç”Ÿæˆè°ƒç”¨å·¥å…·çš„æ–‡æœ¬å†…å®¹ã€‚

LLMä¼šåœ¨éœ€è¦æ—¶`ç”Ÿæˆ`è°ƒç”¨å·¥å…·çš„ä»£ç æ–‡æœ¬ï¼Œ**æ™ºèƒ½ä½“**è´Ÿè´£`è§£æ`è¯¥è¾“å‡ºçš„ä»£ç ï¼Œè¯†åˆ«å¹¶ä»£è¡¨LLM`è°ƒç”¨`å·¥å…·ï¼Œ`å·¥å…·è¾“å‡º`å†è¿”å›ç»™LLMï¼Œç”±LLM`ç”Ÿæˆæœ€ç»ˆå›å¤`ç»™ç”¨æˆ·ã€‚å·¥å…·è°ƒç”¨è¿‡ç¨‹é€šå¸¸å¯¹ç”¨æˆ·ä¸å¯è§ã€‚

ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œå°±å¥½åƒLLMä½¿ç”¨äº†è¿™ä¸ªå·¥å…·ï¼Œä½†å®é™…ä¸Šæ˜¯åº”ç”¨ç¨‹åºä»£ç  (Agentæ™ºèƒ½ä½“) åšçš„ã€‚

#### 2.4.3. å¦‚ä½•æä¾›å·¥å…·ç»™LLM

æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨`ç³»ç»Ÿæç¤ºï¼ˆsystem promptï¼‰`ä¸ºæ¨¡å‹æä¾›å¯ç”¨å·¥å…·çš„æ–‡æœ¬æè¿°ï¼ˆtextual descriptionsï¼‰ã€‚

ç³»ç»Ÿæç¤ºç¤ºä¾‹ï¼š

![system prompt example](/images/2025-02-18-agent_system_prompt.png)

å·¥å…·å¿…é¡»ç‰¹åˆ«å‡†ç¡®å’Œç²¾ç¡®ï¼ˆprecise and accurateï¼‰åœ°è¯´æ˜ï¼š

* å·¥å…·çš„åŠŸèƒ½ï¼ˆWhat the tool doesï¼‰
* æœŸæœ›çš„å…·ä½“è¾“å…¥ï¼ˆWhat exact inputs it expectsï¼‰

## 3. AIæ™ºèƒ½ä½“å·¥ä½œæµï¼ˆAI Agent Workflowï¼‰

Agentæ™ºèƒ½ä½“çš„å·¥ä½œæ˜¯ä¸€ä¸ªè¿ç»­çš„å¾ªç¯ï¼š `æ€è€ƒï¼ˆThoughtï¼‰` -> `è¡ŒåŠ¨ï¼ˆActionï¼‰` -> `è§‚å¯Ÿ (Observation)`ã€‚

## 4. traeè¯•ç”¨

è¿‘æœŸå­—èŠ‚å‘å¸ƒäº†[trae](https://www.trae.ai/)ï¼ˆthe real ai engine ?ï¼‰AIç¼–ç¨‹å·¥å…·ï¼Œç±»ä¼¼cursorï¼Œè¯•ç”¨ä¸€ä¸‹ã€‚

è®©å…¶ç”Ÿæˆä¸€ä¸ªæµ‹è¯•é¡¹ç›®ï¼ŒéªŒè¯`gcc`çš„`address sanitizer`å†…å­˜æ£€æŸ¥åŠŸèƒ½ï¼š

![trae use case](/images/2025-02-17-trae-use-case.png)

è‡ªå·±çš„æœ¬åœ°ç¯å¢ƒç”±äºä¹‹å‰MacOSçš„ç‰ˆæœ¬å’Œå¼€å‘å¥—ä»¶æœ‰ç‚¹é—®é¢˜ï¼Œå®‰è£…mysqlä¾èµ–æœ‰é—®é¢˜ï¼Œè®©traeè°ƒæ•´ä¸ºæœ¬åœ°æ–‡ä»¶æ“ä½œï¼š

![change to file opt](/images/2025-02-17-trae-usefile.png)

è‡ªåŠ¨ä¿®æ”¹äº†å·¥ç¨‹å†…å®¹å’Œç¼–è¯‘é”™è¯¯ï¼Œè¿è¡Œç»“æœï¼š

![result](/images/2025-02-17-trae-testret.png)

è¯•ç”¨ä½“éªŒè¿˜å¯ä»¥ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€å°±å®Œæˆäº†åŸºæœ¬ä»»åŠ¡ï¼Œæ˜¯ä¸ªä¸é”™çš„åŠ©æ‰‹ã€‚

## 5. å°ç»“

## 6. å‚è€ƒ

* [AI Agents Course](https://huggingface.co/learn/agents-course/unit0/introduction)

* GPT